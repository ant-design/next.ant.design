"use strict";(self.webpackChunkantd=self.webpackChunkantd||[]).push([[78075],{88484:function(C,c,e){e.d(c,{Z:function(){return O}});var v=e(1413),p=e(67294),h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},l=h,E=e(13401),u=function(f,b){return p.createElement(E.Z,(0,v.Z)((0,v.Z)({},f),{},{ref:b,icon:l}))};u.displayName="UploadOutlined";var O=p.forwardRef(u)},78075:function(C,c,e){e.r(c);var v=e(19632),p=e.n(v),h=e(15009),l=e.n(h),E=e(99289),u=e.n(E),O=e(5574),U=e.n(O),f=e(67294),b=e(88484),d=e(13669),o=e(66366),W=function(D){var g=D.value,i=D.onChange,y=(0,f.useState)(),M=U()(y,2),a=M[0],I=M[1],j=function(){return{dir:"user-dir/",expire:"1577811661",host:"//www.mocky.io/v2/5cc8019d300000980a055e76",accessId:"c2hhb2RhaG9uZw==",policy:"eGl4aWhhaGFrdWt1ZGFkYQ==",signature:"ZGFob25nc2hhbw=="}},P=function(){var t=u()(l()().mark(function _(){var r;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,j();case 3:r=n.sent,I(r),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),d.message.error(n.t0);case 10:case"end":return n.stop()}},_,null,[[0,7]])}));return function(){return t.apply(this,arguments)}}();(0,f.useEffect)(function(){P()},[]);var L=function(_){var r=_.fileList;console.log("Aliyun OSS:",r),i==null||i(p()(r))},T=function(_){var r=(g||[]).filter(function(m){return m.url!==_.url});i&&i(r)},x=function(_){return{key:_.url,OSSAccessKeyId:a==null?void 0:a.accessId,policy:a==null?void 0:a.policy,Signature:a==null?void 0:a.signature}},B=function(){var t=u()(l()().mark(function _(r){var m,n,A;return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(a){s.next=2;break}return s.abrupt("return",!1);case 2:if(m=Number(a.expire)*1e3,!(m<Date.now())){s.next=6;break}return s.next=6,P();case 6:return n=r.name.slice(r.name.lastIndexOf(".")),A=Date.now()+n,r.url=a.dir+A,s.abrupt("return",r);case 10:case"end":return s.stop()}},_)}));return function(r){return t.apply(this,arguments)}}(),Z={name:"file",fileList:g,action:a==null?void 0:a.host,onChange:L,onRemove:T,data:x,beforeUpload:B};return(0,o.tZ)(d.Upload,Z,(0,o.tZ)(d.Button,{icon:(0,o.tZ)(b.Z,null)},"Click to Upload"))},S=function(){return(0,o.tZ)(d.Form,{labelCol:{span:4}},(0,o.tZ)(d.Form.Item,{label:"Photos",name:"photos"},(0,o.tZ)(W,null)))};c.default=S}}]);
