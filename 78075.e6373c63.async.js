"use strict";(self.webpackChunkantd=self.webpackChunkantd||[]).push([[78075],{88484:function(C,v,e){e.d(v,{Z:function(){return O}});var c=e(1413),h=e(67294),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},l=f,E=e(13401),s=function(p,b){return h.createElement(E.Z,(0,c.Z)((0,c.Z)({},p),{},{ref:b,icon:l}))};s.displayName="UploadOutlined";var O=h.forwardRef(s)},78075:function(C,v,e){e.r(v);var c=e(19632),h=e.n(c),f=e(15009),l=e.n(f),E=e(99289),s=e.n(E),O=e(5574),g=e.n(O),p=e(67294),b=e(88484),d=e(13669),u=e(13946),S=function(D){var M=D.value,i=D.onChange,I=(0,p.useState)(),P=g()(I,2),n=P[0],j=P[1],L=function(){return{dir:"user-dir/",expire:"1577811661",host:"//www.mocky.io/v2/5cc8019d300000980a055e76",accessId:"c2hhb2RhaG9uZw==",policy:"eGl4aWhhaGFrdWt1ZGFkYQ==",signature:"ZGFob25nc2hhbw=="}},U=function(){var o=s()(l()().mark(function r(){var _;return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,L();case 3:_=a.sent,j(_),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),d.message.error(a.t0);case 10:case"end":return a.stop()}},r,null,[[0,7]])}));return function(){return o.apply(this,arguments)}}();(0,p.useEffect)(function(){U()},[]);var T=function(r){var _=r.fileList;console.log("Aliyun OSS:",_),i==null||i(h()(_))},B=function(r){var _=(M||[]).filter(function(m){return m.url!==r.url});i&&i(_)},W=function(r){return{key:r.url,OSSAccessKeyId:n==null?void 0:n.accessId,policy:n==null?void 0:n.policy,Signature:n==null?void 0:n.signature}},Z=function(){var o=s()(l()().mark(function r(_){var m,a,A;return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",!1);case 2:if(m=Number(n.expire)*1e3,!(m<Date.now())){t.next=6;break}return t.next=6,U();case 6:return a=_.name.slice(_.name.lastIndexOf(".")),A=Date.now()+a,_.url=n.dir+A,t.abrupt("return",_);case 10:case"end":return t.stop()}},r)}));return function(_){return o.apply(this,arguments)}}(),K={name:"file",fileList:M,action:n==null?void 0:n.host,onChange:T,onRemove:B,data:W,beforeUpload:Z};return(0,u.tZ)(d.Upload,K,(0,u.tZ)(d.Button,{icon:(0,u.tZ)(b.Z,null)},"Click to Upload"))},R=function(){return(0,u.tZ)(d.Form,{labelCol:{span:4}},(0,u.tZ)(d.Form.Item,{label:"Photos",name:"photos"},(0,u.tZ)(S,null)))};v.default=R}}]);
