"use strict";(self.webpackChunkantd=self.webpackChunkantd||[]).push([[50479],{99168:function(A,h,e){e.d(h,{Z:function(){return E}});var v=e(69412),m=e(71062),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},u=f,b=e(39663),s=function(p,O){return m.createElement(b.Z,(0,v.Z)((0,v.Z)({},p),{},{ref:O,icon:u}))};s.displayName="UploadOutlined";var E=m.forwardRef(s)},50479:function(A,h,e){e.r(h);var v=e(39216),m=e.n(v),f=e(70920),u=e.n(f),b=e(23538),s=e.n(b),E=e(21071),g=e.n(E),p=e(71062),O=e(99168),i=e(12629),o=e(13103),S=function(U){var D=U.value,d=U.onChange,I=(0,p.useState)(),C=g()(I,2),a=C[0],L=C[1],T=function(){return{dir:"user-dir/",expire:"1577811661",host:"//www.mocky.io/v2/5cc8019d300000980a055e76",accessId:"c2hhb2RhaG9uZw==",policy:"eGl4aWhhaGFrdWt1ZGFkYQ==",signature:"ZGFob25nc2hhbw=="}},M=function(){var l=s()(u()().mark(function t(){var _;return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,T();case 3:_=n.sent,L(_),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),i.message.error(n.t0);case 10:case"end":return n.stop()}},t,null,[[0,7]])}));return function(){return l.apply(this,arguments)}}();(0,p.useEffect)(function(){M()},[]);var B=function(t){var _=t.fileList;console.log("Aliyun OSS:",_),d==null||d(m()(_))},W=function(t){var _=(D||[]).filter(function(c){return c.url!==t.url});d&&d(_)},Z=function(t){return{key:t.url,OSSAccessKeyId:a==null?void 0:a.accessId,policy:a==null?void 0:a.policy,Signature:a==null?void 0:a.signature}},K=function(){var l=s()(u()().mark(function t(_){var c,n,P;return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a){r.next=2;break}return r.abrupt("return",!1);case 2:if(c=Number(a.expire)*1e3,!(c<Date.now())){r.next=6;break}return r.next=6,M();case 6:return n=_.name.slice(_.name.lastIndexOf(".")),P=Date.now()+n,_.url=a.dir+P,r.abrupt("return",_);case 10:case"end":return r.stop()}},t)}));return function(_){return l.apply(this,arguments)}}(),j={name:"file",fileList:D,action:a==null?void 0:a.host,onChange:B,onRemove:W,data:Z,beforeUpload:K};return(0,o.tZ)(i.Upload,j,(0,o.tZ)(i.Button,{icon:(0,o.tZ)(O.Z,null)},"Click to Upload"))},R=function(){return(0,o.tZ)(i.Form,{labelCol:{span:4}},(0,o.tZ)(i.Form.Item,{label:"Photos",name:"photos"},(0,o.tZ)(S,null)))};h.default=R}}]);
